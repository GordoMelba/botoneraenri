<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Botonera Enri - Catálogo Mayorista</title>
<style>
  :root{
    --bg:#f5f6fa;
    --panel:#ffffff;
    --line:#e5e7eb;
    --text:#0f172a;
    --muted:#64748b;
    --blue:#1c3f99;
    --blue2:#16357f;
    --green:#16a34a;
    --green2:#12823c;
    --shadow: 0 18px 50px rgba(15, 23, 42, .12);
    --radius:14px;
    --radius2:18px;
  }
  body{ margin:0; font-family: Arial, sans-serif; background: var(--bg); color: var(--text); }
  header{ background: var(--blue); color: white; padding: 16px 20px; font-weight: 800; font-size: 18px; }
  .container{ display:flex; height: calc(100vh - 56px); }
  .sidebar{ width: 280px; background: var(--panel); padding: 18px; border-right: 1px solid var(--line); }
  .sidebar h3{ margin: 0 0 14px 0; font-size: 18px; letter-spacing: -.2px; }
  .category{
    padding: 12px 12px; cursor:pointer; border-radius: 10px; margin-bottom: 8px;
    font-weight: 800; color: var(--text); background: #f3f5ff; border: 1px solid transparent;
    user-select:none; display:flex; align-items:center; justify-content:space-between; gap:10px;
  }
  .category:hover{ border-color:#dbe3ff; }
  .category.active{ background: linear-gradient(180deg, var(--blue), var(--blue2)); color:white; }
  .category small{ color: var(--muted); font-weight: 800; }
  .category.active small{ color: rgba(255,255,255,.85); }
  .main{ flex:1; padding: 18px; overflow-y:auto; }
  .mainTop{ display:flex; align-items:flex-end; justify-content:space-between; gap: 12px; margin-bottom: 12px; }
  #categoryTitle{ margin:0; font-size: 28px; letter-spacing: -.4px; }
  .products{ display:grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 14px; }
  .product{
    background: var(--panel); border-radius: var(--radius2); border: 1px solid var(--line);
    cursor:pointer; overflow:hidden;
    transition: transform .08s ease, box-shadow .2s ease, border-color .2s ease;
  }
  .product:hover{ transform: translateY(-2px); border-color:#dbe3ff; box-shadow: 0 18px 40px rgba(15, 23, 42, .10); }
  .pImg{ height: 160px; background:#eef2ff; position: relative; }
  .pImg img{ width:100%; height:100%; object-fit:cover; display:block; }
  .pBadge{
    position:absolute; top:10px; left:10px; background: rgba(15,23,42,.72);
    color:white; font-size:12px; font-weight:800; padding:6px 10px; border-radius: 999px;
  }
  .pBody{ padding: 12px 12px 14px 12px; display:flex; flex-direction:column; gap: 6px; }
  .pTitle{ font-weight: 900; letter-spacing:-.2px; font-size: 15px; }
  .pSub{ color: var(--muted); font-size: 12px; line-height:1.35; }
  .pFoot{ margin-top: 6px; display:flex; align-items:center; justify-content:space-between; gap: 10px; color: var(--muted); font-size: 12px; }
  .pill{
    background:#f1f5f9; border: 1px solid #e2e8f0; padding: 6px 10px;
    border-radius: 999px; font-weight: 800; color:#334155; white-space: nowrap;
  }

  .order{
    width: 420px; background: var(--panel); padding: 18px; border-left: 1px solid var(--line);
    display:flex; flex-direction:column; gap: 12px;
  }
  .order h3{ margin:0; font-size: 20px; letter-spacing:-.2px; }
  .orderLines{ border:1px solid var(--line); border-radius: 12px; padding: 10px; max-height: 140px; overflow:auto; background: #fbfcff; }
  .orderLine{ font-size: 13px; padding: 6px 0; border-bottom:1px dashed #e6eaf2; }
  .orderLine:last-child{ border-bottom:none; }
  textarea{
    width:100%; height: 260px; border-radius: 12px; border: 1px solid var(--line); padding: 10px;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
    font-size: 12px; resize: vertical; background:#fff;
  }
  .btn{ padding: 12px 12px; border: none; border-radius: 10px; cursor:pointer; font-weight: 900; font-size: 14px; user-select:none; }
  .copy-btn{ background: var(--blue); color:white; }
  .copy-btn:hover{ background: var(--blue2); }
  .whatsapp-btn{ background: var(--green); color:white; }
  .whatsapp-btn:hover{ background: var(--green2); }
  .clear-btn{ background:#f1f5f9; border:1px solid #e2e8f0; color:#334155; }
  .clear-btn:hover{ background:#e9eef6; }

  /* Modal */
  .modalOverlay{
    position: fixed; inset: 0; background: rgba(2,6,23,.55);
    display:none; align-items: center; justify-content: center; padding: 18px; z-index: 999;
  }
  .modal{
    width: min(980px, 96vw); background: var(--panel); border-radius: 18px; box-shadow: var(--shadow);
    overflow:hidden; border: 1px solid rgba(255,255,255,.25);
  }
  .modalHeader{
    padding: 14px 16px; display:flex; align-items:flex-start; justify-content:space-between; gap: 12px;
    border-bottom:1px solid var(--line);
  }
  .modalHeader .code{ color:#f97316; font-weight: 900; font-size: 13px; margin-bottom: 4px; }
  .modalHeader .title{ font-weight: 900; font-size: 22px; letter-spacing:-.3px; margin:0; }
  .modalHeader .x{
    border:none; background: transparent; cursor:pointer; font-size: 22px; line-height: 1;
    padding: 6px 10px; border-radius: 10px; color:#334155;
  }
  .modalHeader .x:hover{ background:#f1f5f9; }
  .modalBody{ display:grid; grid-template-columns: 1.25fr 1fr; gap: 18px; padding: 16px; }
  @media (max-width: 860px){
    .modalBody{ grid-template-columns: 1fr; }
    .container{ flex-direction:column; height:auto; }
    .sidebar,.order{ width:auto; border:0; }
  }
  .modalImg{ border-radius: 14px; overflow:hidden; border: 1px solid var(--line); background:#eef2ff; height: 360px; }
  .modalImg img{ width:100%; height:100%; object-fit:cover; display:block; }
  .modalForm{ display:flex; flex-direction:column; gap: 12px; }
  .desc{ color: var(--muted); font-size: 13px; line-height:1.35; }
  .fieldLabel{ font-weight: 900; font-size: 14px; margin: 4px 0 6px 0; }
  .options{ display:flex; flex-wrap:wrap; gap: 10px; }
  .opt{
    border:1px solid var(--line); background:#f8fafc; padding: 10px 12px; border-radius: 12px;
    cursor:pointer; font-weight: 800; font-size: 13px; user-select:none; min-width: 90px; text-align:center;
  }
  .opt:hover{ border-color:#cfe0ff; background:#eef2ff; }
  .opt.selected{ background: linear-gradient(180deg, var(--blue), var(--blue2)); border-color: rgba(0,0,0,0); color:white; }
  .qtyRow{ display:flex; gap: 10px; align-items:center; }
  .qtyRow input{ width: 160px; padding: 12px 12px; border-radius: 12px; border: 1px solid var(--line); font-size: 14px; outline:none; }
  .hint{ font-size: 12px; color: var(--muted); }
  .modalFooter{
    padding: 14px 16px; border-top:1px solid var(--line);
    display:flex; align-items:center; justify-content:space-between; gap: 12px; background:#fbfcff;
  }
  .modalFooter .minInfo{ color: var(--muted); font-size: 13px; }
  .addBtn{ background:#f97316; color:white; border:none; padding: 12px 14px; border-radius: 12px; font-weight: 950; cursor:pointer; }
  .addBtn:hover{ filter: brightness(.95); }

  .toast{
    position: fixed; bottom: 16px; left: 50%; transform: translateX(-50%);
    background: rgba(2,6,23,.85); color: white; padding: 10px 12px; border-radius: 999px;
    font-weight: 800; font-size: 13px; opacity:0; pointer-events:none;
    transition: opacity .18s ease, transform .18s ease; z-index: 1000;
  }
  .toast.show{ opacity:1; transform: translateX(-50%) translateY(-4px); }
</style>
</head>
<body>
<header>Botonera Enri - Catálogo Mayorista</header>

<div class="container">
  <div class="sidebar">
    <h3>Categorías</h3>
    <div class="category" id="cat-metalicos" onclick="loadCategory('metalicos')">Cierres metálicos <small id="cnt-metalicos"></small></div>
    <div class="category" id="cat-plasticos" onclick="loadCategory('plasticos')">Cierres plásticos <small id="cnt-plasticos"></small></div>
    <div class="category" id="cat-invisibles" onclick="loadCategory('invisibles')">Cierres invisibles <small id="cnt-invisibles"></small></div>
    <div class="category" id="cat-cursores" onclick="loadCategory('cursores')">Cursores <small id="cnt-cursores"></small></div>
    <div class="category" id="cat-botones" onclick="loadCategory('botones')">Botones <small id="cnt-botones"></small></div>
    <div class="category" id="cat-elasticos" onclick="loadCategory('elasticos')">Elásticos / Cordones <small id="cnt-elasticos"></small></div>
    <div class="category" id="cat-cintas" onclick="loadCategory('cintas')">Cintas <small id="cnt-cintas"></small></div>
    <div class="category" id="cat-avios" onclick="loadCategory('avios')">Avíos y accesorios <small id="cnt-avios"></small></div>
  </div>

  <div class="main">
    <div class="mainTop">
      <h2 id="categoryTitle">Seleccioná una categoría</h2>
    </div>
    <div class="products" id="products"></div>
  </div>

  <div class="order">
    <h3>Pedido mayorista</h3>
    <div class="orderLines" id="orderList"></div>
    <textarea id="orderText" readonly></textarea>
    <button class="btn copy-btn" onclick="copyText()">Copiar texto</button>
    <button class="btn whatsapp-btn" onclick="sendWhatsApp()">Enviar por WhatsApp</button>
    <button class="btn clear-btn" onclick="clearOrder()">Limpiar pedido</button>
  </div>
</div>

<!-- Modal -->
<div class="modalOverlay" id="modalOverlay" role="dialog" aria-modal="true">
  <div class="modal">
    <div class="modalHeader">
      <div>
        <div class="code" id="mCode">Código: —</div>
        <h3 class="title" id="mTitle">Producto</h3>
      </div>
      <button class="x" onclick="closeModal()" aria-label="Cerrar">×</button>
    </div>

    <div class="modalBody">
      <div>
        <div class="modalImg">
          <img id="mImg" alt="Foto del producto" src="" />
        </div>
      </div>

      <div class="modalForm">
        <div class="desc" id="mDesc"></div>

        <div id="qualityBlock">
          <div class="fieldLabel">Marca / Calidad <span style="color:#ef4444">*</span></div>
          <div class="options" id="mQualities"></div>
        </div>

        <div>
          <div class="fieldLabel">Color <span style="color:#ef4444">*</span></div>
          <div class="options" id="mColors"></div>
        </div>

        <div>
          <div class="fieldLabel">Medida <span style="color:#ef4444">*</span></div>
          <div class="options" id="mSizes"></div>
        </div>

        <div>
          <div class="fieldLabel">Cantidad <span style="color:#ef4444">*</span></div>
          <div class="qtyRow">
            <input id="mQty" type="number" min="1" step="1" value="1" />
            <div class="hint" id="mMinHint">Mínimo: —</div>
          </div>
        </div>
      </div>
    </div>

    <div class="modalFooter">
      <div class="minInfo" id="mMinInfo">Mínimo: —</div>
      <button class="addBtn" onclick="confirmAdd()">Agregar combinación</button>
    </div>
  </div>
</div>

<div class="toast" id="toast">Listo</div>

<script>
const catalog = {
  "metalicos": [
    {
      "code": "BE-001",
      "name": "Cierre acero inoxidable",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Cierre%20acero%20inoxidable",
      "min": 50,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Sancris",
          "colors": [
            "apto",
            "azul",
            "negro"
          ],
          "sizes": [
            "10",
            "12",
            "14",
            "16",
            "18",
            "6",
            "8"
          ]
        },
        {
          "name": "YKK Eco",
          "colors": [
            "azul",
            "negro"
          ],
          "sizes": [
            "10",
            "12",
            "14",
            "16",
            "18",
            "6",
            "8"
          ]
        }
      ]
    },
    {
      "code": "BE-002",
      "name": "Cierre aluminio cadena 5",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Cierre%20aluminio%20cadena%205",
      "min": 50,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Sancris",
          "colors": [
            "apto",
            "azul",
            "negro"
          ],
          "sizes": [
            "10",
            "12",
            "14",
            "16",
            "18",
            "6",
            "8"
          ]
        }
      ]
    },
    {
      "code": "BE-003",
      "name": "Cierre bronce 4.5",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Cierre%20bronce%204.5",
      "min": 50,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Mil8",
          "colors": [
            "apto",
            "azul",
            "beige",
            "blanco",
            "militar",
            "negro"
          ],
          "sizes": [
            "10",
            "12",
            "14",
            "16",
            "18",
            "6",
            "8"
          ]
        },
        {
          "name": "Sancris",
          "colors": [
            "apto",
            "azul",
            "beige",
            "blanco",
            "militar",
            "negro"
          ],
          "sizes": [
            "10",
            "12",
            "14",
            "16",
            "18",
            "6",
            "8"
          ]
        },
        {
          "name": "YKK Eco",
          "colors": [
            "azul",
            "negro"
          ],
          "sizes": [
            "10",
            "12",
            "14",
            "16",
            "18",
            "6",
            "8"
          ]
        },
        {
          "name": "YKK Premium",
          "colors": [
            "apto",
            "azul",
            "beige",
            "blanco",
            "militar",
            "negro"
          ],
          "sizes": [
            "10",
            "12",
            "14",
            "16",
            "18",
            "6",
            "8"
          ]
        }
      ]
    },
    {
      "code": "BE-004",
      "name": "Cierre en cadena reforzado cadena 5",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Cierre%20en%20cadena%20reforzado%20cadena%205",
      "min": 50,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Sancris",
          "colors": [
            "apto",
            "azul",
            "negro"
          ],
          "sizes": [
            "10",
            "12",
            "14",
            "16",
            "18",
            "6",
            "8"
          ]
        }
      ]
    }
  ],
  "plasticos": [
    {
      "code": "BE-005",
      "name": "Cierre diente de perro (fijo)",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Cierre%20diente%20de%20perro%20(fijo)",
      "min": 50,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Sancris",
          "colors": [
            "apto",
            "azul",
            "negro"
          ],
          "sizes": [
            "10",
            "12",
            "14",
            "16",
            "18",
            "6",
            "8"
          ]
        }
      ]
    },
    {
      "code": "BE-006",
      "name": "Cierre diente de perro (separable)",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Cierre%20diente%20de%20perro%20(separable)",
      "min": 50,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Sancris",
          "colors": [
            "apto",
            "azul",
            "negro"
          ],
          "sizes": [
            "10",
            "12",
            "14",
            "16",
            "18",
            "6",
            "8"
          ]
        }
      ]
    },
    {
      "code": "BE-007",
      "name": "Cierre engomado cadena 3",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Cierre%20engomado%20cadena%203",
      "min": 50,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Sancris",
          "colors": [
            "negro"
          ],
          "sizes": [
            "10",
            "12",
            "14",
            "16",
            "18",
            "6",
            "8"
          ]
        }
      ]
    },
    {
      "code": "BE-008",
      "name": "Cierre en cadena plástico cadena 3",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Cierre%20en%20cadena%20pl%C3%A1stico%20cadena%203",
      "min": 50,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Sancris",
          "colors": [
            "apto",
            "azul",
            "negro"
          ],
          "sizes": [
            "10",
            "12",
            "14",
            "16",
            "18",
            "6",
            "8"
          ]
        }
      ]
    },
    {
      "code": "BE-009",
      "name": "Cierre plástico cadena 2",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Cierre%20pl%C3%A1stico%20cadena%202",
      "min": 50,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Sancris",
          "colors": [
            "apto",
            "azul",
            "negro"
          ],
          "sizes": [
            "10",
            "12",
            "14",
            "16",
            "18",
            "6",
            "8"
          ]
        }
      ]
    },
    {
      "code": "BE-010",
      "name": "Cierre plástico reforzado cadena 5",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Cierre%20pl%C3%A1stico%20reforzado%20cadena%205",
      "min": 50,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Sancris",
          "colors": [
            "apto",
            "azul",
            "negro"
          ],
          "sizes": [
            "10",
            "12",
            "14",
            "16",
            "18",
            "6",
            "8"
          ]
        }
      ]
    },
    {
      "code": "BE-011",
      "name": "Cierre plástico reforzado cadena 5 (fijo)",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Cierre%20pl%C3%A1stico%20reforzado%20cadena%205%20(fijo)",
      "min": 50,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Sancris",
          "colors": [
            "apto",
            "azul",
            "negro"
          ],
          "sizes": [
            "10",
            "12",
            "14",
            "16",
            "18",
            "6",
            "8"
          ]
        }
      ]
    },
    {
      "code": "BE-012",
      "name": "Cierre plástico reforzado cadena 5 (separable)",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Cierre%20pl%C3%A1stico%20reforzado%20cadena%205%20(separable)",
      "min": 50,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Sancris",
          "colors": [
            "apto",
            "azul",
            "negro"
          ],
          "sizes": [
            "10",
            "12",
            "14",
            "16",
            "18",
            "6",
            "8"
          ]
        }
      ]
    },
    {
      "code": "BE-013",
      "name": "Cierre reverso cadena 5",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Cierre%20reverso%20cadena%205",
      "min": 50,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Sancris",
          "colors": [
            "apto",
            "azul",
            "negro"
          ],
          "sizes": [
            "10",
            "12",
            "14",
            "16",
            "18",
            "6",
            "8"
          ]
        }
      ]
    },
    {
      "code": "BE-014",
      "name": "Cierre silver cadena 5 plástico plateado",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Cierre%20silver%20cadena%205%20pl%C3%A1stico%20plateado",
      "min": 50,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Sancris",
          "colors": [
            "apto",
            "azul",
            "negro"
          ],
          "sizes": [
            "10",
            "12",
            "14",
            "16",
            "18",
            "6",
            "8"
          ]
        }
      ]
    }
  ],
  "invisibles": [
    {
      "code": "BE-015",
      "name": "Cierre invisible cadena 3 fijo",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Cierre%20invisible%20cadena%203%20fijo",
      "min": 50,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Sancris",
          "colors": [
            "apto",
            "azul",
            "beige",
            "blanco",
            "negro"
          ],
          "sizes": [
            "10",
            "12",
            "14",
            "16",
            "18",
            "20",
            "22",
            "24"
          ]
        }
      ]
    }
  ],
  "cursores": [
    {
      "code": "BE-016",
      "name": "Cursores cadena 5 y 3",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Cursores%20cadena%205%20y%203",
      "min": 50,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Sancris",
          "colors": [
            "apto",
            "azul",
            "negro"
          ],
          "sizes": [
            "3",
            "5"
          ]
        }
      ]
    }
  ],
  "botones": [
    {
      "code": "BE-017",
      "name": "Botón acrílico 1001 (4 y 2 agujeros)",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Bot%C3%B3n%20acr%C3%ADlico%201001%20(4%20y%202%20agujeros)",
      "min": 100,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Standard",
          "colors": [
            "azul",
            "beige",
            "blanco",
            "marrón",
            "negro"
          ],
          "sizes": [
            "18",
            "20",
            "22",
            "24"
          ]
        }
      ]
    },
    {
      "code": "BE-018",
      "name": "Botón bicapa 93",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Bot%C3%B3n%20bicapa%2093",
      "min": 100,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Standard",
          "colors": [
            "azul",
            "beige",
            "blanco",
            "negro"
          ],
          "sizes": [
            "18",
            "20",
            "22",
            "24"
          ]
        }
      ]
    },
    {
      "code": "BE-019",
      "name": "Botón guardapolvo (4 y 2 agujeros)",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Bot%C3%B3n%20guardapolvo%20(4%20y%202%20agujeros)",
      "min": 100,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Standard",
          "colors": [
            "blanco"
          ],
          "sizes": [
            "14",
            "16",
            "18",
            "20"
          ]
        }
      ]
    },
    {
      "code": "BE-020",
      "name": "Botón luz bicapa",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Bot%C3%B3n%20luz%20bicapa",
      "min": 100,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Standard",
          "colors": [
            "blanco",
            "negro"
          ],
          "sizes": [
            "18",
            "20",
            "22"
          ]
        }
      ]
    },
    {
      "code": "BE-021",
      "name": "Botón madera (4 agujeros)",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Bot%C3%B3n%20madera%20(4%20agujeros)",
      "min": 100,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Standard",
          "colors": [
            "madera clara",
            "madera oscura"
          ],
          "sizes": [
            "18",
            "20",
            "22",
            "24"
          ]
        }
      ]
    },
    {
      "code": "BE-022",
      "name": "Botón oriental (4 agujeros)",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Bot%C3%B3n%20oriental%20(4%20agujeros)",
      "min": 100,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Standard",
          "colors": [
            "azul",
            "beige",
            "blanco",
            "negro"
          ],
          "sizes": [
            "18",
            "20",
            "22"
          ]
        }
      ]
    },
    {
      "code": "BE-023",
      "name": "Botón ovni (4 y 2 agujeros)",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Bot%C3%B3n%20ovni%20(4%20y%202%20agujeros)",
      "min": 100,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Standard",
          "colors": [
            "azul",
            "beige",
            "blanco",
            "negro"
          ],
          "sizes": [
            "18",
            "20",
            "22"
          ]
        }
      ]
    },
    {
      "code": "BE-024",
      "name": "Botón Torino pie",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Bot%C3%B3n%20Torino%20pie",
      "min": 100,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Standard",
          "colors": [
            "azul",
            "beige",
            "blanco",
            "negro"
          ],
          "sizes": [
            "18",
            "20",
            "22"
          ]
        }
      ]
    },
    {
      "code": "BE-025",
      "name": "Botón vaquero",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Bot%C3%B3n%20vaquero",
      "min": 100,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Standard",
          "colors": [
            "bronce",
            "niquel",
            "negro"
          ],
          "sizes": [
            "17",
            "19"
          ]
        }
      ]
    },
    {
      "code": "BE-026",
      "name": "Botón yarda (4 agujeros)",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Bot%C3%B3n%20yarda%20(4%20agujeros)",
      "min": 100,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Standard",
          "colors": [
            "azul",
            "beige",
            "blanco",
            "negro"
          ],
          "sizes": [
            "18",
            "20",
            "22"
          ]
        }
      ]
    }
  ],
  "elasticos": [
    {
      "code": "BE-027",
      "name": "Cordón elástico",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Cord%C3%B3n%20el%C3%A1stico",
      "min": 1,
      "unit": "metros",
      "qualities": [
        {
          "name": "Standard",
          "colors": [
            "blanco",
            "negro"
          ],
          "sizes": [
            "3",
            "4",
            "5"
          ]
        }
      ]
    },
    {
      "code": "BE-028",
      "name": "Elástico algodón crudo",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=El%C3%A1stico%20algod%C3%B3n%20crudo",
      "min": 1,
      "unit": "metros",
      "qualities": [
        {
          "name": "Standard",
          "colors": [
            "crudo"
          ],
          "sizes": [
            "10",
            "12",
            "15",
            "20",
            "25",
            "30"
          ]
        }
      ]
    },
    {
      "code": "BE-029",
      "name": "Elástico bretel",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=El%C3%A1stico%20bretel",
      "min": 1,
      "unit": "metros",
      "qualities": [
        {
          "name": "Standard",
          "colors": [
            "blanco",
            "negro"
          ],
          "sizes": [
            "10",
            "12"
          ]
        }
      ]
    },
    {
      "code": "BE-030",
      "name": "Elástico con cordón",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=El%C3%A1stico%20con%20cord%C3%B3n",
      "min": 1,
      "unit": "metros",
      "qualities": [
        {
          "name": "Standard",
          "colors": [
            "blanco",
            "negro"
          ],
          "sizes": [
            "20",
            "25"
          ]
        }
      ]
    },
    {
      "code": "BE-031",
      "name": "Elástico partido",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=El%C3%A1stico%20partido",
      "min": 1,
      "unit": "metros",
      "qualities": [
        {
          "name": "Standard",
          "colors": [
            "blanco",
            "negro"
          ],
          "sizes": [
            "10",
            "12",
            "15"
          ]
        }
      ]
    },
    {
      "code": "BE-032",
      "name": "Elástico poliéster",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=El%C3%A1stico%20poli%C3%A9ster",
      "min": 1,
      "unit": "metros",
      "qualities": [
        {
          "name": "Standard",
          "colors": [
            "blanco",
            "negro"
          ],
          "sizes": [
            "10",
            "12",
            "15",
            "20"
          ]
        }
      ]
    }
  ],
  "avios": [
    {
      "code": "BE-033",
      "name": "Broche",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Broche",
      "min": 100,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Standard",
          "colors": [
            "negro",
            "niquel"
          ],
          "sizes": [
            "10",
            "12",
            "15"
          ]
        }
      ]
    },
    {
      "code": "BE-034",
      "name": "Condal",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Condal",
      "min": 100,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Standard",
          "colors": [
            "negro",
            "niquel"
          ],
          "sizes": [
            "10",
            "12"
          ]
        }
      ]
    },
    {
      "code": "BE-035",
      "name": "Jardinera",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Jardinera",
      "min": 100,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Standard",
          "colors": [
            "niquel"
          ],
          "sizes": [
            "12"
          ]
        }
      ]
    },
    {
      "code": "BE-036",
      "name": "Mochilera",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Mochilera",
      "min": 100,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Standard",
          "colors": [
            "negro"
          ],
          "sizes": [
            "20",
            "25"
          ]
        }
      ]
    },
    {
      "code": "BE-037",
      "name": "Ojalillo",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Ojalillo",
      "min": 100,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Standard",
          "colors": [
            "dorado",
            "niquel"
          ],
          "sizes": [
            "4",
            "5",
            "6"
          ]
        }
      ]
    },
    {
      "code": "BE-038",
      "name": "Regulador",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Regulador",
      "min": 100,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Standard",
          "colors": [
            "negro",
            "niquel"
          ],
          "sizes": [
            "10",
            "12",
            "15"
          ]
        }
      ]
    },
    {
      "code": "BE-039",
      "name": "Tanca",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Tanca",
      "min": 100,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Standard",
          "colors": [
            "negro"
          ],
          "sizes": [
            "1 agujero",
            "2 agujeros"
          ]
        }
      ]
    },
    {
      "code": "BE-040",
      "name": "Terminal metal",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Terminal%20metal",
      "min": 100,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Standard",
          "colors": [
            "niquel"
          ],
          "sizes": [
            "10",
            "12"
          ]
        }
      ]
    },
    {
      "code": "BE-041",
      "name": "Terminal plástico",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Terminal%20pl%C3%A1stico",
      "min": 100,
      "unit": "unidades",
      "qualities": [
        {
          "name": "Standard",
          "colors": [
            "negro"
          ],
          "sizes": [
            "10",
            "12"
          ]
        }
      ]
    }
  ],
  "cintas": [
    {
      "code": "BE-042",
      "name": "Cinta bies",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Cinta%20bies",
      "min": 1,
      "unit": "metros",
      "qualities": [
        {
          "name": "Standard",
          "colors": [
            "blanco",
            "negro"
          ],
          "sizes": [
            "20",
            "25"
          ]
        }
      ]
    },
    {
      "code": "BE-043",
      "name": "Cinta gross",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Cinta%20gross",
      "min": 1,
      "unit": "metros",
      "qualities": [
        {
          "name": "Standard",
          "colors": [
            "azul",
            "blanco",
            "negro"
          ],
          "sizes": [
            "10",
            "15",
            "20"
          ]
        }
      ]
    },
    {
      "code": "BE-044",
      "name": "Cinta hilera",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Cinta%20hilera",
      "min": 1,
      "unit": "metros",
      "qualities": [
        {
          "name": "Standard",
          "colors": [
            "blanco",
            "negro"
          ],
          "sizes": [
            "100 m"
          ]
        }
      ]
    },
    {
      "code": "BE-045",
      "name": "Cinta vivo",
      "desc": "Seleccioná color, medida y cantidad para armar tu pedido.",
      "image": "https://placehold.co/1200x800?text=Cinta%20vivo",
      "min": 1,
      "unit": "metros",
      "qualities": [
        {
          "name": "Standard",
          "colors": [
            "blanco",
            "negro"
          ],
          "sizes": [
            "10",
            "12"
          ]
        }
      ]
    }
  ]
};

let currentCategory = null;
let order = [];

// Modal state
let modalProduct = null;
let selectedQuality = null;
let selectedColor = null;
let selectedSize  = null;

const $ = (id) => document.getElementById(id);

function toast(msg){
  const t = $("toast");
  t.textContent = msg;
  t.classList.add("show");
  setTimeout(()=> t.classList.remove("show"), 1300);
}

function setCounts(){
  const keys = ["metalicos","plasticos","invisibles","cursores","botones","elasticos","cintas","avios"];
  keys.forEach(k=>{
    const el = $("cnt-"+k);
    if(!el) return;
    const n = (catalog[k] || []).length;
    el.textContent = n ? String(n) : "";
  });
}

function setActiveCat(cat){
  ["metalicos","plasticos","invisibles","cursores","botones","elasticos","cintas","avios"].forEach(c=>{
    const el = $("cat-"+c);
    if(!el) return;
    el.classList.toggle("active", c===cat);
  });
}

function loadCategory(cat){
  currentCategory = cat;
  setActiveCat(cat);

  const titleMap = {
    metalicos: "CIERRES METÁLICOS",
    plasticos: "CIERRES PLÁSTICOS",
    invisibles: "CIERRES INVISIBLES",
    cursores: "CURSORES",
    botones: "BOTONES",
    elasticos: "ELÁSTICOS / CORDONES",
    cintas: "CINTAS",
    avios: "AVÍOS Y ACCESORIOS"
  };

  $("categoryTitle").innerText = titleMap[cat] || cat.toUpperCase();
  const container = $("products");
  container.innerHTML = "";

  (catalog[cat] || []).forEach((p, i) => {
    const colorsSet = new Set();
    const sizesSet = new Set();
    (p.qualities || []).forEach(q=>{
      (q.colors || []).forEach(c=>colorsSet.add(c));
      (q.sizes || []).forEach(s=>sizesSet.add(s));
    });
    const colorsCount = colorsSet.size;
    const sizesCount = sizesSet.size;
    const qualitiesCount = (p.qualities || []).length;

    container.innerHTML += `
      <div class="product" onclick="openProduct('${cat}', ${i})">
        <div class="pImg">
          <img src="${p.image}" alt="${p.name}">
          <div class="pBadge">${p.code || ""}</div>
        </div>
        <div class="pBody">
          <div class="pTitle">${p.name}</div>
          <div class="pSub">${p.desc || ""}</div>
          <div class="pFoot">
            <span class="pill">Min. ${p.min} ${p.unit || "unidades"}</span>
            <span>${colorsCount} colores · ${sizesCount} medidas · ${qualitiesCount} cal.</span>
          </div>
        </div>
      </div>
    `;
  });
}

function openProduct(cat, index){
  modalProduct = (catalog[cat] || [])[index];
  selectedQuality = null;
  selectedColor = null;
  selectedSize  = null;

  $("mCode").innerText = "Código: " + (modalProduct.code || "—");
  $("mTitle").innerText = modalProduct.name || "Producto";
  $("mDesc").innerText = modalProduct.desc || "";
  $("mImg").src = modalProduct.image || "";
  $("mImg").alt = modalProduct.name || "Producto";

  const qWrap = $("mQualities");
  qWrap.innerHTML = "";
  const qualities = modalProduct.qualities || [];
  if(qualities.length <= 1){
    $("qualityBlock").style.display = "none";
    selectedQuality = qualities[0]?.name || "Standard";
  } else {
    $("qualityBlock").style.display = "block";
    qualities.forEach(q=>{
      const btn = document.createElement("div");
      btn.className = "opt";
      btn.textContent = q.name;
      btn.onclick = ()=> selectQuality(btn, q.name);
      qWrap.appendChild(btn);
    });
  }

  $("mQty").value = modalProduct.min || 1;
  $("mQty").min = modalProduct.min || 1;
  $("mMinHint").innerText = `Mínimo: ${modalProduct.min} ${modalProduct.unit || "unidades"}`;
  $("mMinInfo").innerText = `Mínimo: ${modalProduct.min} ${modalProduct.unit || "unidades"}`;

  rebuildColorSizeOptions();
  $("modalOverlay").style.display = "flex";
}

function rebuildColorSizeOptions(){
  const qualities = modalProduct.qualities || [];
  let q = qualities[0] || null;
  if(selectedQuality){
    q = qualities.find(x=>x.name===selectedQuality) || q;
  }

  const colors = q?.colors || [];
  const sizes  = q?.sizes  || [];

  const colorsWrap = $("mColors");
  colorsWrap.innerHTML = "";
  colors.forEach(c=>{
    const btn = document.createElement("div");
    btn.className = "opt";
    btn.textContent = c;
    btn.onclick = ()=> selectColor(btn, c);
    colorsWrap.appendChild(btn);
  });

  const sizesWrap = $("mSizes");
  sizesWrap.innerHTML = "";
  sizes.forEach(s=>{
    const btn = document.createElement("div");
    btn.className = "opt";
    btn.textContent = s;
    btn.onclick = ()=> selectSize(btn, s);
    sizesWrap.appendChild(btn);
  });

  selectedColor = null;
  selectedSize = null;
}

function selectQuality(btn, value){
  selectedQuality = value;
  [...$("mQualities").children].forEach(x=> x.classList.remove("selected"));
  btn.classList.add("selected");
  rebuildColorSizeOptions();
}
function selectColor(btn, value){
  selectedColor = value;
  [...$("mColors").children].forEach(x=> x.classList.remove("selected"));
  btn.classList.add("selected");
}
function selectSize(btn, value){
  selectedSize = value;
  [...$("mSizes").children].forEach(x=> x.classList.remove("selected"));
  btn.classList.add("selected");
}

function closeModal(){ $("modalOverlay").style.display = "none"; }
$("modalOverlay").addEventListener("click", (e)=>{ if(e.target.id === "modalOverlay") closeModal(); });
window.addEventListener("keydown", (e)=>{ if(e.key === "Escape") closeModal(); });

function confirmAdd(){
  if(!modalProduct) return;

  const qualities = modalProduct.qualities || [];
  if(qualities.length > 1 && !selectedQuality){ toast("Elegí una calidad"); return; }
  if(!selectedColor){ toast("Elegí un color"); return; }
  if(!selectedSize){ toast("Elegí una medida"); return; }

  let qty = Number($("mQty").value || 0);
  const min = Number(modalProduct.min || 1);

  if(!Number.isFinite(qty) || qty <= 0){ toast("Cantidad inválida"); return; }
  if(qty < min){ qty = min; $("mQty").value = min; toast("Se ajustó al mínimo"); }

  const unit = modalProduct.unit || "unidades";
  const q = (qualities.length <= 1) ? (qualities[0]?.name || "Standard") : selectedQuality;

  const line = `${modalProduct.code} - ${modalProduct.name} - ${q} - ${selectedColor} - ${selectedSize} - ${qty} ${unit}`;
  order.push(line);
  updateOrder();

  closeModal();
  toast("Agregado al pedido");
}

function updateOrder(){
  const list = $("orderList");
  list.innerHTML = "";

  if(order.length === 0){
    list.innerHTML = `<div style="color:#64748b;font-size:13px;">Todavía no agregaste productos.</div>`;
    $("orderText").value = "PEDIDO MAYORISTA\n\n(Agregar ítems desde el catálogo)";
    return;
  }

  order.forEach(i=>{
    const div = document.createElement("div");
    div.className = "orderLine";
    div.textContent = i;
    list.appendChild(div);
  });

  $("orderText").value = "PEDIDO MAYORISTA\n\n" + order.join("\n");
}

function copyText(){
  const text = $("orderText");
  text.select();
  document.execCommand("copy");
  toast("Texto copiado");
}

function clearOrder(){
  order = [];
  updateOrder();
  toast("Pedido limpiado");
}

function sendWhatsApp(){
  const number = prompt("Ingresá tu número WhatsApp con código país. Ej: 54911XXXXXXX");
  if(!number) return;
  const text = encodeURIComponent($("orderText").value);
  window.open(`https://wa.me/${number.replace(/\D/g,"")}?text=${text}`, "_blank");
}

setCounts();
updateOrder();
loadCategory("metalicos");
</script>

</body>
</html>
